# CloudShell Networking Standard
# Suitable for modeling network devices
# Supports both L2 (Switch) and L3 (Router)
# More Info: https://support.qualisystems.com/entries/98793728--General-Networking-Shell-Standard

tosca_definitions_version: tosca_simple_yaml_1_0

imports:
  - cloudshell_base_standard: cloudshell_base_standard.yaml
  
node_types:

  cloudshell.networking.nodes.NetworkDevice:
    derived_from: cloudshell.standard.Shell
    properties:
      User:
        description: User with administrative privileges
        type: string
      Password:
        type: string
      Enable Password:
        type: string
      System Name:
        type: string
      Contact Name:
        type: string
      OS Version:
        type: string
      Vendor:
        type: string
      Location:
        type: string
      Model:
        type: string
      Power Management:
        type: string
        description: Possible values - True, False
      Backup Location:
        type: string
    capabilities:
      SupportsSNMP:
        type: cloudshell.networking.capabilities.SupportsSNMP
      SupportsConsoleConnection:
        type: cloudshell.networking.capabilities.SupportsConsoleConnection
    requirements:
      - Chassis:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericChassis
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]
      - Port Channels:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericPortChannel
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]
    interfaces:
      cloudshell.networking.networking_resource_driver_interface:
        remove_vlan: {}
        add_vlan: {}
        apply_connectivity_changes: {}
        send_custom_command: {}
        send_custom_config_command: {}
        shutdown: {}

  cloudshell.networking.nodes.GenericChassis:
    properties:
      Model:
        type: string
      Serial Number:
        type: string
    requirements:
      - Modules:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericModule
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]
      - Ports:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericPort
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]
      - Power Ports:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericPowerPort
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]

  cloudshell.networking.nodes.GenericModule:
    properties:
      Model:
        type: string
      Version:
        type: string
      Serial Number:
        type: string
    requirements:
      - SubModules:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericSubModule
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]
      - Ports:
            capability: tosca.capabilities.Attachment
            node: cloudshell.nodes.GenericPort
            relationship: tosca.relationships.AttachesTo
            occurrences: [0, UNBOUNDED]

  cloudshell.networking.nodes.GenericSubModule:
    properties:
      Model:
        type: string
      Version:
        type: string
      Serial Number:
        type: string
    requirements:
      - Ports:
        capability: tosca.capabilities.Attachment
        node: cloudshell.nodes.GenericPort
        relationship: tosca.relationships.AttachesTo
        occurrences: [0, UNBOUNDED]

  cloudshell.networking.nodes.GenericPort:
    properties:
      MAC Address:
        type: string
      L2 Protocol Type:
        type: string
        description: Such as POS, Serial
      IPv4 Address:
        type: string
      IPv6 Address:
        type: string
      Port Description:
        type: string
      Bandwidth:
        type: integer
      MTU:
        type: integer
      Duplex:
        type: string
        description: Half or Full
      Adjacent:
        type: string
        description: System or Port
      Protocol Type:
        type: string
        description: Default values is Transparent (="0")
        default: 0
      Auto Negotiation:
        type: string
        description: True or False

  cloudshell.networking.nodes.GenericPortChannel:
    properties:
      Associated Ports:
        type: string
        description: value in the form "[portResourceName],...". For example "GE0-0-0-1,GE0-0-0-2"
      IPv4 Address:
        type: string
      IPv6 Address:
        type: string
      Port Description:
        type: string
      Protocol Type:
        type: string
        description: Default values is Transparent (="0")
        default: 0

  cloudshell.networking.nodes.GenericPowerPort:
    properties:
      Model:
        type: string
      Serial Number:
        type: string
      Version:
        type: string
      Port Description:
        type: string

capability_types:
#------------------------------------#
# CloudShell Types (Families)
#------------------------------------#
  cloudshell.networking.types.Switch:
   derived_from: cloudshell.capabilities.CloudshellType

  cloudshell.networking.types.Router:
    derived_from: cloudshell.capabilities.CloudshellType

#------------------------------------#
# Networking Capabilities
#------------------------------------#

  cloudshell.networking.capabilities.SupportsSNMP:
    properties:
      SNMP Read Community:
        type: string
      SNMP Write Community:
        type: string
      SNMP V3 User:
        type: string
      SNMP V3 Password:
        type: string
      SNMP V3 Private Key:
        type: string
      SNMP Version:
        type: string
        description: Possible values - v1, v2c, v3
        constraints:
          - valid_values: [ v1, v2c, v3]

  cloudshell.networking.capabilities.SupportsConsoleConnection:
    properties:
      Console Server IP Address:
        type: string
      Console User:
        type: string
      Console Port:
        type: integer
      Console Password:
        type: string
      CLI Connection Type:
        type: string
        description: Possible values - Auto, Console, SSH, Telnet, TCP
